<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Wordle Solver for Samar</title>
    <style>
        html {
            height: 100%;
        }

        body {
            max-width: max-content;
            margin: auto;
            /*height: 10%;
            background-color: lightgreen;
            font-family: 'nyt-franklin-700' !important;
            margin: 0 auto;
            padding: 0;
            /* Prevent scrollbar appearing on page transition */
            /*overflow-y: hidden;*/
        }

        .word {
            background: #fffbef;
            border-radius: 4px;
            border: 1px solid #e8ddbd;
            color: #593230;
            display: inline-block;
            font-weight: 700;
            font-family: sans-serif;
            font-size: 14px;
            line-height: 26px;
            margin: 3px 1px;
            min-width: 14px;
            padding: 0 4px;
            text-align: center;
            text-transform: uppercase;
        }


        footer {
            text-align: left;
            padding: 3px;
            background-color: white;
            bottom: 1;
            position: fixed;
            color: white;
            display: block;
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</head>

<body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <br><br><br><br>
    <h1 style="color: darkblue; font-size: 46px;">Samar's Wordle Assist.</h1>
    <br><br><br><br>
    <hr>
    <!--
    <p> For options - you can enter B for no hit, Y for a hit but not in the correct position and G for a hit in the
        right position </p>
    <p>
        For example, if your current wordle has a
    </p>
    <img src="https://sat02pap002files.storage.live.com/y4meOuWKOPKFLCBxEQZOumiNCro57_S7lcyOUAnb18HLfWaIbYnXkqIa266SQMpAh4PQQTALQlXyA2vLs6qa8adiwVavWQYsBbgsionBsD8gMaDH8utyO2qwsaSk6MKWwajWsBcIBo7RNDCCxcZGNDUgy8pEdylcDrfcmI_Uh9LBEneEk32gVIB8acNSNXZIIIqoKEfy7xQibtoYV7GJdQiMA/wordle-example.jfif?psid=1&width=2560&height=1185"
        style="width:400px;height:50px;">
    <p> You should enter BGYGY in the textbox </p>
    <p> Refer to the following link for a Demo <a href="https://youtu.be/VZI2RRafCtw">SamWordle Demo</a>
    </p>
    <hr>-->
    <br>
    <br>


    <div class="WordleInput">
        <form action="" method="post">
            {% csrf_token %}
            <p style="color: red; font-size: 16px;"> {{error_msg}}</p>

            <label for="guess_list">Your Guess Word List: </label>
            <select name="selected_word" onclick=setValue()>
                {% for guess in guess_list %}
                <option value="{{ guess }}">{{ guess }}</option>
                {% endfor %}
            </select>
            <br>
            <!-- <label for="your_options">Your Options: </label> -->
            <!--  <input id="your_options" type="text" name="your_options"> -->
            <!--<button class="btn btn-green btn-sm" onclick="request_access(this)" guess_list="{{ guess_list }}"
                select_list="{{ select_list }}" word_list="{{ word_list }}"><i class="fa fa-plus"></i> Get
                Words</button> -->
            <input type="hidden" id="Colored_Word" name="Colored_Word">

            {% for x in '01234' %}
            <input type="hidden" id="mask{{x}}" name="mask{{x}}">
            {% endfor %}

            <br>

            <div name="wordcontainer" class="container">
                <div name="words" class="words">

                    {% for char in active_word %}
                    <div name="word" class="word" onclick=selected(this)> &nbsp;</div>
                    {% endfor %}

                </div>
            </div>
            <br>
            <button class="btn btn-green btn-sm" onclick="request_access(this)" guess_list="{{ guess_list }}"
                select_list="{{ select_list }}" word_list="{{ word_list }}"><i class="fa fa-play"></i> Get
                Words</button>

            <button onclick="reset_wordle()" class="btn btn-green btn-sm"><i class="fa fa-refresh"></i> Reset
                Game</button>
            <!-- <input type="submit" value="OK"> -->
        </form>

    </div>
    <br><br>

    <h4>Selected Options </h4>
    <ul>
        {% for i in list %}
        <li>{{ i }}</li>
        {% endfor %}
    </ul>
    <br><br>
    <hr>
    <br>
    <script>
        var divItems = document.getElementsByClassName("word");
        window.onload = init;

        function setValueOfColors(value) {
            if (value !== '') {
                document.getElementById("Colored_Word").setAttribute('value', value);
            }
            for (var i = 0; i < divItems.length; i++) {
                var item = divItems[i];
                //item.style.backgroundColor = 'grey';
                if (divItems[i].style.backgroundColor == 'grey') {
                    document.getElementById("mask" + i).setAttribute('value', 'B')
                }
                if (divItems[i].style.backgroundColor == 'yellow') {
                    document.getElementById("mask" + i).setAttribute('value', 'Y')
                }
                if (divItems[i].style.backgroundColor == 'green') {
                    document.getElementById("mask" + i).setAttribute('value', 'G')
                }

            }

        }

        function selected(item) {
            //this.clear();
            //console.log(item.style.backgroundColor);
            if (item.style.backgroundColor == 'grey') {
                item.style.backgroundColor = 'yellow';
            }
            else if (item.style.backgroundColor == 'yellow') {
                item.style.backgroundColor = 'green';
            }
            else if (item.style.backgroundColor == 'green') {
                item.style.backgroundColor = 'grey';
            }
            //console.log(item.style.backgroundColor);
            setValueOfColors("");
        }

        function setValue() {
            var selected_word = document.getElementsByTagName("select");
            console.log(selected_word.selected_word.value);
            for (var i = 0; i < selected_word.selected_word.value.length; i++) {
                var item = divItems[i];
                //item.style.backgroundColor = 'grey';
                item.textContent = selected_word.selected_word.value[i];
            }
            //console.log(item.style.backgroundColor);
            //document.getElementById("Colored_Word").setAttribute('value', selected_word.selected_word.value);
            setValueOfColors(selected_word.selected_word.value);
        }


        function init() {
            //const WordleInput = document.getElementsByClassName('WordleInput');
            //var selected_word = WordleInput[0].getElementsByTagName('select');

            var selected_word = document.getElementsByTagName("select");
            //console.log(WordleInput);
            console.log(selected_word.selected_word.value);
            for (var i = 0; i < selected_word.selected_word.value.length; i++) {
                var item = divItems[i];
                item.style.backgroundColor = 'grey';
                item.textContent = selected_word.selected_word.value[i];
            }
            //console.log(item.style.backgroundColor);
            //document.getElementsByTagName("Colored_Word").value = selected_word.selected_word.value;
            //document.getElementById("Colored_Word").setAttribute('value', selected_word.selected_word.value);
            //console.log(Colored_Word);
            setValueOfColors(selected_word.selected_word.value);
        }

        function reset_wordle() {
            init();
            for (var i = 0; i < divItems.length; i++) {
                document.getElementById("mask" + i).setAttribute('value', 'X');
            }
        }


        function request_access($this) {
            console.log("button clicked");
            //var guess_list = $this.guess_list;
            //var word_list = $this.word_list;
            //var select_list = $this.select_list;
            var colored_word = document.getElementsByTagName("select").selected_word.value;
            console.log("Here we go!!!");
            console.log(colored_word);

            //console.log("data: " + request_data);
            $.ajax({
                url: "/",
                data: { csrfmiddlewaretoken: '{{ csrf_token }}', colored_word: colored_word },
                success: function (response) {
                    console.log(response);
                }
            })
        }


    </script>
</body>

<footer>
    <table cellpadding="0" cellspacing="0" style="vertical-align: -webkit-baseline-middle; ; font-family: Arial;">
        <tbody>
            <tr>
                <td>
                    <table cellpadding="0" cellspacing="0"
                        style="vertical-align: -webkit-baseline-middle; ; font-family: Arial;">
                        <tbody>
                            <tr>
                                <td width="46">
                                    <div></div>
                                </td>
                                <td style="padding: 0px; vertical-align: middle;">
                                    <h3 style="margin: 0px; font-size: 18px; color: black;">
                                        <span>Ankur Katiyar</span>
                                    </h3>
                                    <p
                                        style="margin: 0px; color: rgb(154, 154, 154); font-size: 14px; line-height: 22px;">
                                        <span>caffeine-to-code converter</span>
                                    </p>
                                    <table cellpadding="0" cellspacing="0"
                                        style="vertical-align: -webkit-baseline-middle; ; font-family: Arial; width: 100%;">
                                        <tbody>
                                            <tr>
                                                <td height="0"></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <table cellpadding="0" cellspacing="0"
                                                        style="vertical-align: -webkit-baseline-middle; ; font-family: Arial; display: inline-block;">
                                                        <tbody>
                                                            <tr style="text-align: center;">
                                                                <td width="5">
                                                                    <div style="margin-left: 0px; margin-right: 5px; ">
                                                                        <a
                                                                            href="https://www.linkedin.com/in/ankur-katiyar/">
                                                                            <i class="fa fa-linkedin"></i>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                                <td width="5">
                                                                    <div
                                                                        style="margin-left: 0px; margin-right: 5px; color: black;">
                                                                        <a href=" https://twitter.com/ankurkatiyar"
                                                                            target="_blank">
                                                                            <i class='fa fa-twitter'></i>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                                <td width="5">
                                                                    <div style="margin-left: 0px; margin-right: 5px;">
                                                                        <a href="https://github.com/ankur-katiyar"
                                                                            target="_blank">
                                                                            <i class="fa fa-github"></i>
                                                                        </a>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>

                                    </table>
</footer>

</html>